@(index: services.IndexPage)(implicit request: RequestHeader)

@import layout.ContainerLayout
@import views.support.getTagContainerDefinition
@import model.Collection
@import views.support.RenderClasses
@import com.gu.facia.client.models.CollectionConfig

<div class="l-side-margins l-side-margins--layout-front">
    <div class="@RenderClasses(Map(
            "facia-container" -> true,
            "facia-container--layout-front" -> true,
            "facia-container--sponsored" -> index.page.isSponsored,
            "facia-container--advertisement-feature" -> index.page.isAdvertisementFeature,
            "facia-container--foundation-supported" -> index.page.isFoundationSupported,
            "js-sponsored-front" -> (index.page.isSponsored || index.page.isAdvertisementFeature || index.page.isFoundationSupported)))"
        data-link-name="Front | @request.path"
        @index.page.sponsor.map { sponsor =>
            data-sponsor="@sponsor"
        }
        @index.page.sponsorshipType.map { sponsorshipType =>
            data-sponsorship="@sponsorshipType"
        }
        role="main">

        @defining(getTagContainerDefinition(index.page)) { containerDefinition =>
            @fragments.containers.tag(
                index.page,
                Collection(index.trails),
                ContainerLayout.fromContainerDefinition(containerDefinition, index.trails),
                pagination = index.page.pagination,
                dataId = index.page.id
            )(request, CollectionConfig.withDefaults(displayName = Some(index.page.webTitle)))
        }

        @fragments.commercial.commercialComponent()
    </div>
</div>
