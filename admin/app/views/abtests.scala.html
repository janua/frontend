@(env: String, charts: Seq[tools.LineChart])

@chart(chart: tools.LineChart) = {
    <div id="@chart.id" class="chart @chart.format.cssClass"></div>

    <script type="text/javascript">
    new google.visualization.LineChart(document.getElementById('@chart.id'))
    .draw(google.visualization.arrayToDataTable(@Html(chart.asDataset)), {
        curveType: 'function',
        colors: [@Html(chart.format.colours.map(c => s"'$c'").mkString(","))],
        chartArea: {
            width: "95%"
        },
        legend: {
            position: "in"
        },
        vAxis: {
            title: 'Pageviews/session',
            textPosition: 'in',
            titleTextStyle: {
                fontSize: 11
            }
        },
        fontName : 'Helvetica'
    });
    </script>
}

@admin_main("A/B Tests", env, isAuthed = true, hasCharts = true) {

    <link href="@routes.Assets.at("css/abtests.css")" rel="stylesheet">

    <h1>A/B Tests</h1>

    <div class="row-fluid">

        <section class="breakdown-section span12" id="breakdown">
            <h3>Breakdown</h3>
        </section>

    </div>

    <div class="row-fluid">

        <section class="participation-section span12" id="participation">
            <h3>Test Participations</h3>
            <p class="muted">
                This section provides buttons for opting in and out of active tests.
            </p>
        </section>

    </div>

    <script type="text/template" id="tmpl-participation-template">@fragments.participation()</script>
    <script type="text/template" id="tmpl-breakdown-template">@fragments.breakdown()</script>
    <script type="text/template" id="tmpl-breakdown-item-template">@fragments.breakdownItem()</script>
    <script type="text/template" id="tmpl-participation-item-template">@fragments.participationItem()</script>

    @charts.map{ lineChart => @chart(lineChart) }
}
